let t;function e(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})}const i=globalThis,n=i.trustedTypes,a=n?n.createPolicy("lit-html",{createHTML:t=>t}):void 0,s="$lit$",o=`lit$${Math.random().toFixed(9).slice(2)}$`,r="?"+o,l=`<${r}>`,h=document,d=()=>h.createComment(""),c=t=>null===t||"object"!=typeof t&&"function"!=typeof t,y=Array.isArray,u=t=>y(t)||"function"==typeof t?.[Symbol.iterator],g="[ 	\n\f\r]",x=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,p=/-->/g,f=/>/g,v=RegExp(`>|${g}(?:([^\\s"'>=/]+)(${g}*=${g}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),m=/'/g,w=/"/g,A=/^(?:script|style|textarea|title)$/i,M=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),$=M(1),b=(M(2),M(3),Symbol.for("lit-noChange")),_=Symbol.for("lit-nothing"),P=new WeakMap,C=h.createTreeWalker(h,129);function D(t,e){if(!y(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==a?a.createHTML(e):e}const S=(t,e)=>{let i=t.length-1,n=[],a,r=2===e?"<svg>":3===e?"<math>":"",h=x;for(let e=0;e<i;e++){let i=t[e],d,c,y=-1,u=0;for(;u<i.length&&(h.lastIndex=u,null!==(c=h.exec(i)));)u=h.lastIndex,h===x?"!--"===c[1]?h=p:void 0!==c[1]?h=f:void 0!==c[2]?(A.test(c[2])&&(a=RegExp("</"+c[2],"g")),h=v):void 0!==c[3]&&(h=v):h===v?">"===c[0]?(h=a??x,y=-1):void 0===c[1]?y=-2:(y=h.lastIndex-c[2].length,d=c[1],h=void 0===c[3]?v:'"'===c[3]?w:m):h===w||h===m?h=v:h===p||h===f?h=x:(h=v,a=void 0);let g=h===v&&t[e+1].startsWith("/>")?" ":"";r+=h===x?i+l:y>=0?(n.push(d),i.slice(0,y)+s+i.slice(y)+o+g):i+o+(-2===y?e:g)}return[D(t,r+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),n]};class E{constructor({strings:t,_$litType$:e},i){let a;this.parts=[];let l=0,h=0,c=t.length-1,y=this.parts,[u,g]=S(t,e);if(this.el=E.createElement(u,i),C.currentNode=this.el.content,2===e||3===e){let t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(a=C.nextNode())&&y.length<c;){if(1===a.nodeType){if(a.hasAttributes())for(let t of a.getAttributeNames())if(t.endsWith(s)){let e=g[h++],i=a.getAttribute(t).split(o),n=/([.?@])?(.*)/.exec(e);y.push({type:1,index:l,name:n[2],strings:i,ctor:"."===n[1]?j:"?"===n[1]?B:"@"===n[1]?N:R}),a.removeAttribute(t)}else t.startsWith(o)&&(y.push({type:6,index:l}),a.removeAttribute(t));if(A.test(a.tagName)){let t=a.textContent.split(o),e=t.length-1;if(e>0){a.textContent=n?n.emptyScript:"";for(let i=0;i<e;i++)a.append(t[i],d()),C.nextNode(),y.push({type:2,index:++l});a.append(t[e],d())}}}else if(8===a.nodeType)if(a.data===r)y.push({type:2,index:l});else{let t=-1;for(;-1!==(t=a.data.indexOf(o,t+1));)y.push({type:7,index:l}),t+=o.length-1}l++}}static createElement(t,e){let i=h.createElement("template");return i.innerHTML=t,i}}function I(t,e,i=t,n){if(e===b)return e;let a=void 0!==n?i._$Co?.[n]:i._$Cl,s=c(e)?void 0:e._$litDirective$;return a?.constructor!==s&&(a?._$AO?.(!1),void 0===s?a=void 0:(a=new s(t))._$AT(t,i,n),void 0!==n?(i._$Co??=[])[n]=a:i._$Cl=a),void 0!==a&&(e=I(t,a._$AS(t,e.values),a,n)),e}class T{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){let{el:{content:e},parts:i}=this._$AD,n=(t?.creationScope??h).importNode(e,!0);C.currentNode=n;let a=C.nextNode(),s=0,o=0,r=i[0];for(;void 0!==r;){if(s===r.index){let e;2===r.type?e=new k(a,a.nextSibling,this,t):1===r.type?e=new r.ctor(a,r.name,r.strings,this,t):6===r.type&&(e=new U(a,this,t)),this._$AV.push(e),r=i[++o]}s!==r?.index&&(a=C.nextNode(),s++)}return C.currentNode=h,n}p(t){let e=0;for(let i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class k{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,n){this.type=2,this._$AH=_,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){c(t=I(this,t,e))?t===_||null==t||""===t?(this._$AH!==_&&this._$AR(),this._$AH=_):t!==this._$AH&&t!==b&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==_&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(h.createTextNode(t)),this._$AH=t}$(t){let{values:e,_$litType$:i}=t,n="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=E.createElement(D(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(e);else{let t=new T(n,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=P.get(t.strings);return void 0===e&&P.set(t.strings,e=new E(t)),e}k(t){y(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,i,n=0;for(let a of t)n===e.length?e.push(i=new k(this.O(d()),this.O(d()),this,this.options)):i=e[n],i._$AI(a),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){let e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class R{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,n,a){this.type=1,this._$AH=_,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=a,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=_}_$AI(t,e=this,i,n){let a=this.strings,s=!1;if(void 0===a)(s=!c(t=I(this,t,e,0))||t!==this._$AH&&t!==b)&&(this._$AH=t);else{let n,o,r=t;for(t=a[0],n=0;n<a.length-1;n++)(o=I(this,r[i+n],e,n))===b&&(o=this._$AH[n]),s||=!c(o)||o!==this._$AH[n],o===_?t=_:t!==_&&(t+=(o??"")+a[n+1]),this._$AH[n]=o}s&&!n&&this.j(t)}j(t){t===_?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class j extends R{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===_?void 0:t}}class B extends R{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==_)}}class N extends R{constructor(t,e,i,n,a){super(t,e,i,n,a),this.type=5}_$AI(t,e=this){if((t=I(this,t,e,0)??_)===b)return;let i=this._$AH,n=t===_&&i!==_||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,a=t!==_&&(i===_||n);n&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class U{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){I(this,t)}}const L=i.litHtmlPolyfillSupport;L?.(E,k),(i.litHtmlVersions??=[]).push("3.2.1");const H=(t,e,i)=>{let n=i?.renderBefore??e,a=n._$litPart$;if(void 0===a){let t=i?.renderBefore??null;n._$litPart$=a=new k(e.insertBefore(d(),t),t,void 0,i??{})}return a._$AI(t),a};class V{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const{I:W}={M:s,P:o,A:r,C:1,L:S,R:T,D:u,V:I,I:k,H:R,N:B,U:N,B:j,F:U},O=()=>document.createComment(""),F=(t,e,i)=>{let n=t._$AA.parentNode,a=void 0===e?t._$AB:e._$AA;if(void 0===i)i=new W(n.insertBefore(O(),a),n.insertBefore(O(),a),t,t.options);else{let e=i._$AB.nextSibling,s=i._$AM,o=s!==t;if(o){let e;i._$AQ?.(t),i._$AM=t,void 0!==i._$AP&&(e=t._$AU)!==s._$AU&&i._$AP(e)}if(e!==a||o){let t=i._$AA;for(;t!==e;){let e=t.nextSibling;n.insertBefore(t,a),t=e}}}return i},q=(t,e,i=t)=>(t._$AI(e,i),t),z={},G=(t,e=z)=>t._$AH=e,X=t=>t._$AH,Y=t=>{t._$AP?.(!1,!0);let e=t._$AA,i=t._$AB.nextSibling;for(;e!==i;){let t=e.nextSibling;e.remove(),e=t}},Z=(t,e,i)=>{let n=new Map;for(let a=e;a<=i;a++)n.set(t[a],a);return n},K=(t=class extends V{constructor(t){if(super(t),2!==t.type)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let n;void 0===i?i=e:void 0!==e&&(n=e);let a=[],s=[],o=0;for(let e of t)a[o]=n?n(e,o):o,s[o]=i(e,o),o++;return{values:s,keys:a}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,n]){let a=X(t),{values:s,keys:o}=this.dt(e,i,n);if(!Array.isArray(a))return this.ut=o,s;let r=this.ut??=[],l=[],h,d,c=0,y=a.length-1,u=0,g=s.length-1;for(;c<=y&&u<=g;)if(null===a[c])c++;else if(null===a[y])y--;else if(r[c]===o[u])l[u]=q(a[c],s[u]),c++,u++;else if(r[y]===o[g])l[g]=q(a[y],s[g]),y--,g--;else if(r[c]===o[g])l[g]=q(a[c],s[g]),F(t,l[g+1],a[c]),c++,g--;else if(r[y]===o[u])l[u]=q(a[y],s[u]),F(t,a[c],a[y]),y--,u++;else if(void 0===h&&(h=Z(o,u,g),d=Z(r,c,y)),h.has(r[c]))if(h.has(r[y])){let e=d.get(o[u]),i=void 0!==e?a[e]:null;if(null===i){let e=F(t,a[c]);q(e,s[u]),l[u]=e}else l[u]=q(i,s[u]),F(t,a[c],i),a[e]=null;u++}else Y(a[y]),y--;else Y(a[c]),c++;for(;u<=g;){let e=F(t,l[g+1]);q(e,s[u]),l[u++]=e}for(;c<=y;){let t=a[c++];null!==t&&Y(t)}return this.ut=o,G(t,l),b}},(...e)=>({_$litDirective$:t,values:e}));var Q={};e(Q,"distance",()=>J),e(Q,"distanceSquared",()=>tt),e(Q,"midpoint",()=>te),e(Q,"closest",()=>ti),e(Q,"isPointInCircle",()=>tn),e(Q,"isPointInRectangle",()=>ta),e(Q,"isPointInLine",()=>ts),e(Q,"moveTowards",()=>to),e(Q,"interpolate",()=>tr);const J=(t,e)=>{let i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)},tt=(t,e)=>{let i=e.x-t.x,n=e.y-t.y;return i*i+n*n},te=(t,e)=>({x:(t.x+e.x)/2,y:(t.y+e.y)/2}),ti=(t,e)=>{if(!e.length)throw Error("Points array is empty");return e.reduce((e,i)=>tt(t,i)<tt(t,e)?i:e)},tn=(t,e)=>tt(t,{x:e.x,y:e.y})<e.radius*e.radius,ta=(t,e)=>t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height,ts=(t,e,i=1)=>{let n=e.end.x-e.start.x,a=e.end.y-e.start.y,s=Math.sqrt(n*n+a*a);if(0===s)return J(t,e.start)<=i/2;let o=((t.x-e.start.x)*n+(t.y-e.start.y)*a)/(s*s);return o<0?J(t,e.start)<=i/2:o>1?J(t,e.end)<=i/2:J(t,{x:e.start.x+o*n,y:e.start.y+o*a})<=i/2},to=(t,e,i)=>{if(i<=0)return t;let n=e.x-t.x,a=e.y-t.y,s=Math.sqrt(n*n+a*a);return s<=i||0===s?e:{x:t.x+n/s*i,y:t.y+a/s*i}},tr=(t,e,i)=>({x:t.x+(e.x-t.x)*Math.max(0,Math.min(1,i)),y:t.y+(e.y-t.y)*Math.max(0,Math.min(1,i))});function tl(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)}function th(t,e,i="blue",n=5){t.fillStyle=i,t.beginPath(),t.arc(e.x,e.y,n,0,2*Math.PI),t.fill()}function td(t,e,i="blue",n=!1){t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI),n?(t.fillStyle=i,t.fill()):(t.strokeStyle=i,t.stroke())}function tc(t,e,i="gray",n=1){t.strokeStyle=i,t.lineWidth=n,t.beginPath(),t.moveTo(e.start.x,e.start.y),t.lineTo(e.end.x,e.end.y),t.stroke()}function ty(t,e,i="blue",n=!1){n?(t.fillStyle=i,t.fillRect(e.x,e.y,e.width,e.height)):(t.strokeStyle=i,t.strokeRect(e.x,e.y,e.width,e.height))}function tu(t,e,i,n="blue"){let a=Math.atan2(i.y-e.y,i.x-e.x);tc(t,{start:e,end:i},n),t.fillStyle=n,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(i.x-10*Math.cos(a-Math.PI/6),i.y-10*Math.sin(a-Math.PI/6)),t.lineTo(i.x-10*Math.cos(a+Math.PI/6),i.y-10*Math.sin(a+Math.PI/6)),t.fill()}function tg(t,e,i,n,a,s="black"){t.beginPath(),t.arc(e.x,e.y,i,n,a),t.strokeStyle=s,t.stroke()}function tx(t,e,{x:i=10,y:n=20,spacing:a=20,precision:s=2,color:o="black"}={}){e.forEach((e,r)=>{!function(t,e,i,n,a="black",s="14px monospace"){t.fillStyle=a,t.font=s,t.fillText(e,i,n)}(t,Array.isArray(e)?`${e[0]}: ${function t(e,i=2){let n=t=>t.toFixed(i);if("number"==typeof e)return n(e);if("string"==typeof e)return e;if("boolean"==typeof e)return e?"✅ Yes":"❌ No";if(Array.isArray(e))return`{${e.map(([e,n])=>`${e}=${t(n,i)}`).join(", ")}}`;if("radius"in e)return`(${n(e.x)}, ${n(e.y)}, r=${n(e.radius)})`;if("width"in e)return`(${n(e.x)}, ${n(e.y)}) [${n(e.width)}\xd7${n(e.height)}]`;if("start"in e){let t=`${n(e.start.x)}, ${n(e.start.y)}`,i=`${n(e.end.x)}, ${n(e.end.y)}`;return`(${t}) \u{2192} (${i})`}return`(${n(e.x)}, ${n(e.y)})`}(e[1],e[2]?.precision??s)}`:e,i,n+r*a,Array.isArray(e)&&e[2]?.color||o)})}function tp(t,e,i={x:0,y:0}){let n=function(t,e){let i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}(t,e);return{x:n.x-i.x,y:n.y-i.y}}function tf({canvas:t,draw:e,center:i={x:0,y:0}},n){let a=!1;t.addEventListener("mousedown",s=>{a=!0,n.onStart?.(tp(t,s,i))??n.onDrag?.(tp(t,s,i)),e?.()}),t.addEventListener("mousemove",s=>{a&&(n.onDrag?.(tp(t,s,i)),e?.())}),t.addEventListener("mouseup",s=>{a&&(n.onEnd?.(tp(t,s,i)),a=!1,e?.())}),t.addEventListener("mouseleave",s=>{a&&(n.onEnd?.(tp(t,s,i)),a=!1,e?.())})}function tv({canvas:t,draw:e,center:i={x:0,y:0}},n){t.addEventListener("click",a=>{n(tp(t,a,i)),e?.()})}function tm({canvas:t,draw:e,center:i={x:0,y:0}},n){t.addEventListener("mousemove",a=>{n(tp(t,a,i)),e?.()})}function tw({canvas:t,draw:e},i){let n=t=>({"+":"=","-":"_"})[t.toLowerCase()]??t.toLowerCase(),a=Object.entries(i).reduce((t,[e,i])=>(e.split("").forEach(e=>t[n(e.trim())]=i),t),{}),s=t=>{let i=a[n(t.key)];i&&(i(),e?.())};return t.tabIndex=0,t.focus(),t.addEventListener("keydown",s),()=>t.removeEventListener("keydown",s)}let tA=null;function tM(t,e){!function i(){e?.(),t(),tA=requestAnimationFrame(i)}()}function t$(t,e){let i=performance.now();tM(e,()=>{let e=performance.now(),n=Math.min((e-i)/1e3,.1);i=e,t(n)})}function tb(t,e,i){t.save(),t.translate(e.x,e.y),i(t),t.restore()}function t_(t){let e=t.canvas.width,i=t.canvas.height;t.strokeStyle="lightgray",t.lineWidth=1,t.beginPath(),t.moveTo(-e/2,0),t.lineTo(e/2,0),t.stroke(),t.beginPath(),t.moveTo(0,-i/2),t.lineTo(0,i/2),t.stroke()}const tP=(()=>{let t=new Set,e=null;return{listen(){e||(e=e=>{"keydown"===e.type&&t.add(e.code),"keyup"===e.type&&t.delete(e.code)},window.addEventListener("keydown",e),window.addEventListener("keyup",e))},isDown:e=>t.has(e),stop(){e&&(window.removeEventListener("keydown",e),window.removeEventListener("keyup",e),e=null,t.clear())}}})();var tC={};e(tC,"degreesToRadians",()=>tD),e(tC,"radiansToDegrees",()=>tS),e(tC,"radiansBetweenLines",()=>tE),e(tC,"degreesBetweenLines",()=>tI),e(tC,"radiansBetweenPoints",()=>tT),e(tC,"degreesBetweenPoints",()=>tk),e(tC,"degreesBetweenAngles",()=>tR),e(tC,"radiansBetweenAngles",()=>tj),e(tC,"rotateAroundByRadians",()=>tB),e(tC,"rotateAroundByDegrees",()=>tN),e(tC,"rotateAngleTowardsRadians",()=>tU),e(tC,"rotateAngleTowardsDegrees",()=>tL);const tD=t=>t*Math.PI/180,tS=t=>180*t/Math.PI,tE=(t,e)=>{let i=t.end.x-t.start.x,n=t.end.y-t.start.y,a=e.end.x-e.start.x,s=e.end.y-e.start.y,o=Math.sqrt(i*i+n*n),r=Math.sqrt(a*a+s*s);return Math.acos((i*a+n*s)/(o*r))},tI=(t,e)=>tS(tE(t,e)),tT=(t,e)=>{let i=e.x-t.x;return Math.atan2(e.y-t.y,i)},tk=(t,e)=>tS(tT(t,e)),tR=(t,e)=>{let i=tD(t),n=tD(e)-i;return tS(Math.atan2(Math.sin(n),Math.cos(n)))},tj=(t,e)=>{let i=e-t;return Math.atan2(Math.sin(i),Math.cos(i))},tB=(t,e,i)=>{let n=tT(t,e),a=J(t,e);return{x:t.x+Math.cos(n+i)*a,y:t.y+Math.sin(n+i)*a}},tN=(t,e,i)=>tB(t,e,tD(i)),tU=(t,e,i)=>{let n=(t%(2*Math.PI)+2*Math.PI)%(2*Math.PI),a=(e%(2*Math.PI)+2*Math.PI)%(2*Math.PI)-n;return a>Math.PI&&(a-=2*Math.PI),a<-Math.PI&&(a+=2*Math.PI),n+(Math.abs(a)<=i?a:Math.sign(a)*i)},tL=(t,e,i)=>tS(tU(tD(t),tD(e),tD(i))),tH=()=>({x:0,y:0}),tV=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),tW=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),tO=(t,e)=>({x:t.x*e,y:t.y*e}),tF=t=>Math.sqrt(t.x*t.x+t.y*t.y),tq=(t,e)=>{let i=tW(e,t);return tz({x:-i.y,y:i.x})},tz=t=>{let e=tF(t);return 0===e?tH():tO(t,1/e)},tG=(t,e,i)=>{let n=Math.max(e,Math.min(i,tF(t)));return tO(tz(t),n)},tX=(t,e,i)=>({x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}),tY=(t,e,i)=>{let n=e.x-t.x,a=e.y-t.y,s=tW(i,t);return Math.max(0,Math.min(1,(s.x*n+s.y*a)/(n*n+a*a)))},tZ=(t,e)=>{let i=2*t1(t,e);return{x:t.x-i*e.x,y:t.y-i*e.y}},tK=(t,e)=>({x:Math.cos(t)*e,y:Math.sin(t)*e}),tQ=(t,e)=>tK(t*Math.PI/180,e),tJ=(t,e)=>{let i=Math.cos(e),n=Math.sin(e);return{x:t.x*i-t.y*n,y:t.x*n+t.y*i}},t0=(t,e)=>tJ(t,e*Math.PI/180),t1=(t,e)=>t.x*e.x+t.y*e.y,t2=(t,e)=>tO(tz(t),e),t5=(t,e)=>{let{start:i,end:n}=t,{start:a,end:s}=e,o=(i.x-n.x)*(a.y-s.y)-(i.y-n.y)*(a.x-s.x);if(0===o)return null;let r=((i.x-a.x)*(a.y-s.y)-(i.y-a.y)*(a.x-s.x))/o,l=((i.x-a.x)*(i.y-n.y)-(i.y-a.y)*(i.x-n.x))/o;return r>=0&&r<=1&&l>=0&&l<=1?{x:i.x+r*(n.x-i.x),y:i.y+r*(n.y-i.y)}:null},t3=(t,e)=>{let{start:i,end:n}=t,{x:a,y:s,radius:o}=e,r=n.x-i.x,l=n.y-i.y,h=r*r+l*l,d=2*(r*(i.x-a)+l*(i.y-s)),c=d*d-4*h*((i.x-a)**2+(i.y-s)**2-o**2);if(c<0)return[];let y=(-d-Math.sqrt(c))/(2*h),u=(-d+Math.sqrt(c))/(2*h),g=[];return y>=0&&y<=1&&g.push({x:i.x+y*r,y:i.y+y*l}),u>=0&&u<=1&&g.push({x:i.x+u*r,y:i.y+u*l}),g},t4=(t,e)=>{let{x:i,y:n,width:a,height:s}=e,o=[];return[{start:{x:i,y:n},end:{x:i+a,y:n}},{start:{x:i+a,y:n},end:{x:i+a,y:n+s}},{start:{x:i+a,y:n+s},end:{x:i,y:n+s}},{start:{x:i,y:n+s},end:{x:i,y:n}}].forEach(e=>{let i=t5(t,e);i&&o.push(i)}),o},t9=(t,e)=>{let i=J(t,e),n=t.radius+e.radius-i;return n>0?n:0},t8=(t,e)=>{let i=Math.max(t.x,e.x),n=Math.max(t.y,e.y),a=Math.min(t.x+t.width,e.x+e.width)-i,s=Math.min(t.y+t.height,e.y+e.height)-n;return a>0&&s>0?{x:i,y:n,width:a,height:s}:null};var t6={};e(t6,"applyForce",()=>t7),e(t6,"applyDamping",()=>et),e(t6,"applyTorque",()=>ee),e(t6,"applyAngleForce",()=>ei),e(t6,"collide",()=>en),e(t6,"separate",()=>ea),e(t6,"repel",()=>es),e(t6,"fluid",()=>eo),e(t6,"boids",()=>er);const t7=(t,e,i=1)=>{t.x+=e.x*i,t.y+=e.y*i},et=(t,e)=>{t.x*=1-e,t.y*=1-e},ee=(t,e,i=1)=>t+e*i,ei=(t,e,i,n=1)=>{t7(t,tK(e,i),n)},en=(t,e,i=.9,n="separate")=>{let a=tz(tW(e.position,t.position)),s=t1(tW(e.velocity,t.velocity),a);if(s<=0){let n=tO(a,-(1+i)*s/(1/t.mass+1/e.mass));t.velocity=tW(t.velocity,tO(n,1/t.mass)),e.velocity=tV(e.velocity,tO(n,1/e.mass))}"separate"===n?ea(t,e):"repel"===n&&es(t,e)},ea=(t,e)=>{let i=tW(e.position,t.position),n=J(t.position,e.position),a=t.radius+e.radius-n;if(a<=0)return;let s=0===n?{x:1,y:0}:tO(i,1/n),o=t.mass+e.mass,r=tO(s,a),l=tO(r,e.mass/o),h=tO(r,t.mass/o);t.position=tW(t.position,l),e.position=tV(e.position,h)},es=(t,e,i=1)=>{let n=tW(e.position,t.position),a=J(t.position,e.position),s=t.radius+e.radius-a;if(s<=0||0===a)return;let o=tO(n,1/a),r=s*i,l=t.mass+e.mass,h=e.mass/l*r,d=t.mass/l*r;t.velocity=tW(t.velocity,tO(o,h)),e.velocity=tV(e.velocity,tO(o,d))},eo=(t,{smoothingRadius:e=30,stiffness:i=50,restDensity:n=1,viscosity:a=.1}={})=>{let s=t.map(()=>({x:0,y:0})),o={},r=(t,i)=>`${Math.floor(t/e)},${Math.floor(i/e)}`;return t.forEach(t=>{let e=r(t.position.x,t.position.y);o[e]||(o[e]=[]),o[e].push(t)}),t.forEach(t=>{t.density=0;let[a,s]=r(t.position.x,t.position.y).split(",").map(Number);for(let i=-1;i<=1;i++)for(let n=-1;n<=1;n++)(o[`${a+i},${s+n}`]||[]).forEach(i=>{let n=Math.sqrt(tt(t.position,i.position));n<e&&(t.density+=i.mass*(1-n/e))});t.pressure=i*(t.density-n)}),t.forEach((t,i)=>{let[n,l]=r(t.position.x,t.position.y).split(",").map(Number);for(let r=-1;r<=1;r++)for(let h=-1;h<=1;h++)(o[`${n+r},${l+h}`]||[]).forEach(n=>{if(t===n)return;let o=J(t.position,n.position);if(o<e){let r=tO(tz(tW(n.position,t.position)),-(t.pressure+n.pressure)*(1-o/e)/(2*t.density*n.density)),l=tO(tW(n.velocity,t.velocity),a*(1-o/e)/(t.density*n.density));s[i]=tV(s[i],tO(tV(r,l),t.mass*n.mass))}})}),s},er=(t,e={})=>{let{separationRadius:i=25,alignmentRadius:n=50,cohesionRadius:a=50,separationWeight:s=1,alignmentWeight:o=1,cohesionWeight:r=1,maxSpeed:l=10}=e;return t.map((e,a)=>{let h={x:0,y:0},d={x:0,y:0},c={x:0,y:0},y=0;t.forEach((t,s)=>{if(a===s)return;let o=J(e.position,t.position);if(o<i){let i=tz(tW(e.position,t.position));h=tV(h,tO(i,1/Math.max(o,.1)))}o<n&&(d=tV(d,t.velocity),c=tV(c,t.position),y++)});let u={x:0,y:0};if(y>0&&((0!==h.x||0!==h.y)&&(h=tz(h)),d=tO(d,1/y),c=tW(c=tO(c,1/y),e.position),(0!==d.x||0!==d.y)&&(d=tz(d)),(0!==c.x||0!==c.y)&&(c=tz(c)),u=tV(tV(tO(h,s),tO(d,o)),tO(c,r))),l>0){let t=Math.sqrt(u.x*u.x+u.y*u.y);t>l&&(u=tO(u,l/t))}return u})};class el{static{this.DOWNWARD_GRAVITY={x:0,y:980}}constructor(t={}){this.position={x:0,y:0},this.velocity=tH(),this.acceleration=tH(),this.mass=1,this.radius=0,this.elasticity=.8,this.collisionOverlapResolution="separate",this.minSpeed=0,this.angle=0,this.angularVelocity=0,this.angularDrag=0,this.friction=0,this.gravity=tH(),this.drag=0,Object.assign(this,t)}update(t){t7(this.acceleration,this.gravity),this.friction>0&&et(this.velocity,this.friction),this.drag>0&&et(this.velocity,this.drag),t7(this.velocity,this.acceleration,t);let e=tF(this.velocity);void 0!==this.maxSpeed&&e>this.maxSpeed&&(this.velocity=tO(tz(this.velocity),this.maxSpeed)),e<this.minSpeed&&(this.velocity=tH()),t7(this.position,this.velocity,t),this.angle+=this.angularVelocity*t,this.angularDrag>0&&(this.angularVelocity=ee(this.angularVelocity,this.angularVelocity,1/this.mass)),this.acceleration=tH(),this.angularVelocity=0}applyForce(t){t7(this.acceleration,t,1/this.mass)}applyImpulse(t){t7(this.velocity,t,1/this.mass)}applyTorque(t){this.angularVelocity=ee(this.angularVelocity,t,1/this.mass)}thrust(t,e=this.angle){ei(this.acceleration,e,t,this.mass)}pointAt(t){this.angle=tT(this.position,t)}pointTowards(t,e){let i=tT(this.position,t);this.angle=tU(this.angle,i,e)}collideWithBody(t){if(this===t||J(t.position,this.position)>this.radius+t.radius)return!1;let e=this.elasticity*t.elasticity;return en(this,t,e,this.collisionOverlapResolution),!0}collideWithSurface(t,e){let i=tz(e),n=t1(tW(this.position,t),i);n>=this.radius||(this.position=tV(this.position,tO(i,this.radius-n)),this.velocity=tO(tZ(this.velocity,i),this.elasticity))}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get speed(){return tF(this.velocity)}set speed(t){Math.abs(t)<this.minSpeed?this.velocity=tH():this.velocity=t2(this.velocity,t)}}const eh={point:{distance:t=>{let e=t.getContext("2d"),i={x:100,y:100},n={x:300,y:300};function a(){tl(e),th(e,i,"blue"),th(e,n,"red"),tc(e,{start:i,end:n},"gray"),tx(e,[["Distance",J(i,n)],"Click to set point 1"])}tv({canvas:t,draw:a},t=>i=t),tm({canvas:t,draw:a},t=>n=t),a()},distanceSquared:t=>{let e=t.getContext("2d"),i={x:100,y:100},n={x:300,y:300};function a(){tl(e),th(e,i,"blue"),th(e,n,"red"),tc(e,{start:i,end:n},"gray"),tx(e,[["Distance",J(i,n)],["Distance²",tt(i,n)],"Click to set point 1"])}tv({canvas:t,draw:a},t=>i=t),tm({canvas:t,draw:a},t=>n=t),a()},midpoint:t=>{let e=t.getContext("2d"),i={x:100,y:100},n={x:300,y:300};function a(){tl(e),th(e,i,"blue"),th(e,n,"red"),tc(e,{start:i,end:n},"gray");let t=te(i,n);th(e,t,"green"),tx(e,[["Midpoint",t],"Click to set point 1"])}tv({canvas:t,draw:a},t=>i=t),tm({canvas:t,draw:a},t=>n=t),a()},closest:t=>{let e=t.getContext("2d"),i=[],n={x:0,y:0};function a(){i=Array.from({length:10},()=>({x:Math.random()*t.width,y:Math.random()*t.height}))}function s(){tl(e);let t=ti(n,i);i.forEach(i=>{th(e,i,i===t?"red":"blue")}),tx(e,[["Mouse",n],["Closest",t],"Click to generate new points"])}tv({canvas:t,draw:s},()=>a()),tm({canvas:t,draw:s},t=>n=t),a(),s()},isPointInCircle:t=>{let e=t.getContext("2d"),i={x:200,y:200,radius:50},n={x:0,y:0};function a(){tl(e);let t=tn(n,i);td(e,i,t?"green":"red"),th(e,i,"blue"),th(e,n,t?"green":"red"),tx(e,[["Inside",t],["Circle",i],"Click and drag to resize circle"])}tm({canvas:t,draw:a},t=>n=t),tf({canvas:t,draw:a},{onStart:t=>i={...i,...t},onDrag:t=>i.radius=J(i,t)}),a()},isPointInRectangle:t=>{let e=t.getContext("2d"),i={x:200,y:200,width:100,height:100},n={x:0,y:0};function a(){tl(e);let t=ta(n,i);ty(e,i,t?"green":"red"),th(e,n,t?"green":"red"),tx(e,[["Inside",t],["Rectangle",i],"Click and drag to draw rectangle"])}tm({canvas:t,draw:a},t=>n=t),tf({canvas:t,draw:a},{onStart:t=>i={...i,x:t.x,y:t.y,width:0,height:0},onDrag:t=>{i.width=t.x-i.x,i.height=t.y-i.y}}),a()},isPointInLine:t=>{let e=t.getContext("2d"),i={start:{x:100,y:100},end:{x:300,y:300}},n={x:0,y:0},a=10;function s(){tl(e);let t=ts(n,i,a),s=t?"green":"red";td(e,{...i.start,radius:a/2},s,!0),td(e,{...i.end,radius:a/2},s,!0),tc(e,i,s,a),tx(e,[["Inside",t],["Line",i],["Line Width",a],"Click and drag to draw line","Press + or - to adjust width"])}tm({canvas:t,draw:s},t=>n=t),tf({canvas:t,draw:s},{onStart:t=>i.start=i.end=t,onDrag:t=>i.end=t}),tw({canvas:t,draw:s},{"+":()=>a++,"-":()=>a--}),s()},moveTowards:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:t.width/2+100,y:t.height/2},a=5;function s(){tl(e),th(e,i,"blue"),th(e,n,"red"),tc(e,{start:i,end:n},"gray"),tx(e,[["Current",i],["Target",n],["Distance",J(i,n)],["Speed",a],"Move mouse to set target","Use +/- to adjust speed"])}tm({canvas:t,draw:s},t=>n=t),tw({canvas:t,draw:s},{"+":()=>a*=1.2,"-":()=>a/=1.2}),tM(s,()=>i=to(i,n,a))},interpolate:t=>{let e=t.getContext("2d"),i={x:100,y:100},n={x:300,y:300},a=.5;function s(){tl(e),th(e,i,"blue"),th(e,n,"red"),tc(e,{start:i,end:n},"gray");let t=tr(i,n,a);th(e,t,"green"),tx(e,[["Point 1",i],["Point 2",n],["t (Interpolation)",a.toFixed(2)],["Interpolated",t],"Click to set Point 1","Move mouse to set Point 2","Use +/- to adjust t"])}tv({canvas:t,draw:s},t=>i=t),tm({canvas:t,draw:s},t=>n=t),tw({canvas:t,draw:s},{"+":()=>a=Math.min(1,a+.05),"-":()=>a=Math.max(0,a-.05)}),s()}},angle:{degreesToRadians:t=>{let e=t.getContext("2d"),i=45,n={x:t.width/2,y:t.height/2};function a(){tl(e),th(e,n,"black",5);let t=tD(i);tg(e,n,100,0,t,"blue");let a=tV(n,{x:100,y:0}),s=tV(n,tK(t,100));tc(e,{start:n,end:a},"blue"),tc(e,{start:n,end:s},"blue"),tx(e,[["Degrees",i],["Radians",t],"Use +/- to adjust angle"])}tw({canvas:t,draw:a},{"+":()=>i++,"-":()=>i--}),a()},radiansToDegrees:t=>{let e=t.getContext("2d"),i=Math.PI/4,n={x:t.width/2,y:t.height/2};function a(){tl(e),th(e,n,"black",5);let t=tS(i);tg(e,n,100,0,i,"red");let a=tV(n,{x:100,y:0}),s=tV(n,tK(i,100));tc(e,{start:n,end:a},"red"),tc(e,{start:n,end:s},"red"),tx(e,[["Radians",i],["Degrees",t],"Use +/- to adjust angle"])}tw({canvas:t,draw:a},{"+":()=>i+Math.PI/180,"-":()=>i-=Math.PI/180}),a()},radiansBetweenLines:t=>{let e=t.getContext("2d"),i={start:{x:400,y:300},end:{x:500,y:300}},n={start:{x:400,y:300},end:{x:500,y:400}};function a(){tl(e),tc(e,i,"blue"),tc(e,n,"red"),th(e,i.start,"black"),tx(e,[["Angle (rad)",tE(i,n)],"Drag endpoints to adjust lines"])}tf({canvas:t,draw:a},{onStart:t=>{ti(t,[i.end,n.end])===i.end?i.end=t:n.end=t},onDrag:t=>{ti(t,[i.end,n.end])===i.end?i.end=t:n.end=t}}),a()},degreesBetweenLines:t=>{let e=t.getContext("2d"),i={start:{x:400,y:300},end:{x:500,y:300}},n={start:{x:400,y:300},end:{x:500,y:400}};function a(){tl(e),tc(e,i,"blue"),tc(e,n,"red"),th(e,i.start,"black"),tx(e,[["Angle (deg)",tI(i,n)],"Drag endpoints to adjust lines"])}tf({canvas:t,draw:a},{onStart:t=>{ti(t,[i.end,n.end])===i.end?i.end=t:n.end=t},onDrag:t=>{ti(t,[i.end,n.end])===i.end?i.end=t:n.end=t}}),a()},radiansBetweenPoints:t=>{let e=t.getContext("2d"),i={x:400,y:300},n={x:500,y:300};function a(){tl(e),th(e,i,"blue"),th(e,n,"red"),tu(e,i,n),tx(e,[["Angle (rad)",tT(i,n)],"Click to set center, move mouse for target"])}tm({canvas:t,draw:a},t=>n=t),tf({canvas:t,draw:a},{onStart:t=>i=t,onDrag:t=>i=t}),a()},degreesBetweenPoints:t=>{let e=t.getContext("2d"),i={x:400,y:300},n={x:500,y:300};function a(){tl(e),th(e,i,"blue"),th(e,n,"red"),tu(e,i,n),tx(e,[["Angle (deg)",tk(i,n)],"Click to set center, move mouse for target"])}tm({canvas:t,draw:a},t=>n=t),tf({canvas:t,draw:a},{onStart:t=>i=t,onDrag:t=>i=t}),a()},degreesBetweenAngles:t=>{let e=t.getContext("2d"),i=45,n=90,a={x:t.width/2,y:t.height/2};function s(){tl(e);let t=tV(a,tQ(i,100)),s=tV(a,tQ(n,100));tu(e,a,t,"blue"),tu(e,a,s,"red"),tx(e,[["Angle 1 (deg)",i],["Angle 2 (deg)",n],["Degrees Between",tR(i,n)],"Use 1/2 to adjust angles"])}tw({canvas:t,draw:s},{1:()=>i=(i+15)%360,2:()=>n=(n+15)%360}),s()},radiansBetweenAngles:t=>{let e=t.getContext("2d"),i=Math.PI/4,n=Math.PI/2,a={x:t.width/2,y:t.height/2};function s(){tl(e);let t=tV(a,tK(i,100)),s=tV(a,tK(n,100));tu(e,a,t,"blue"),tu(e,a,s,"red"),tx(e,[["Angle 1 (rad)",i],["Angle 2 (rad)",n],["Radians Between",tj(i,n)],"Use 1/2 to adjust angles"])}tw({canvas:t,draw:s},{1:()=>i=(i+Math.PI/6)%(2*Math.PI),2:()=>n=(n+Math.PI/6)%(2*Math.PI)}),s()},rotateAroundByRadians:t=>{let e=t.getContext("2d"),i={x:400,y:300},n={x:500,y:300},a=Math.PI/180;function s(){tl(e),th(e,i,"blue"),th(e,n,"red"),tu(e,i,n),tx(e,[["Center",i],["Point",n],["Angle (rad)",tT(i,n)],"Click to set center, move mouse for point"])}tm({canvas:t,draw:s},t=>n=t),tv({canvas:t,draw:s},t=>i=t),tM(s,()=>n=tB(i,n,a))},rotateAroundByDegrees:t=>{let e=t.getContext("2d"),i={x:400,y:300},n={x:500,y:300};function a(){tl(e),th(e,i,"blue"),th(e,n,"red"),tu(e,i,n),tx(e,[["Center",i],["Point",n],["Angle (deg)",tk(i,n)],"Click to set center, move mouse for point"])}tm({canvas:t,draw:a},t=>n=t),tv({canvas:t,draw:a},t=>i=t),tM(a,()=>n=tN(i,n,1))},rotateAngleTowardsRadians:t=>{let e=t.getContext("2d"),i=0,n={x:400,y:300},a={x:500,y:300},s=Math.PI/180/3;function o(){tl(e),th(e,n,"blue"),th(e,a,"red");let t=tV(n,tK(i,100));tu(e,n,t),tx(e,[["Current Angle",i],["Target Angle",tT(n,a)],["Speed",s],"Move mouse to change target","Press +/- to adjust speed"])}tm({canvas:t,draw:o},t=>a=t),tw({canvas:t,draw:o},{"+":()=>s*=1.5,"-":()=>s/=1.5}),tM(o,()=>i=tU(i,tT(n,a),s))},rotateAngleTowardsDegrees:t=>{let e=t.getContext("2d"),i=0,n={x:400,y:300},a={x:500,y:300},s=.33;function o(){tl(e),th(e,n,"blue"),th(e,a,"red");let t=tV(n,tQ(i,100));tu(e,n,t),tx(e,[["Current Angle",i],["Target Angle",tk(n,a)],["Speed",s],"Move mouse to change target","Press +/- to adjust speed"])}tm({canvas:t,draw:o},t=>a=t),tw({canvas:t,draw:o},{"+":()=>s*=1.5,"-":()=>s/=1.5}),tM(o,()=>i=tL(i,tk(n,a),s))}},intersection:{getLineIntersection:t=>{let e=t.getContext("2d"),i={start:{x:100,y:100},end:{x:300,y:300}},n={start:{x:100,y:300},end:{x:300,y:100}},a=null;function s(){tl(e),tc(e,i,"blue"),tc(e,n,"red");let t=t5(i,n);t&&th(e,t,"green"),tx(e,[["Intersection",t||"None"],"Drag endpoints to adjust the lines"])}tf({canvas:t,draw:s},{onStart:t=>{a=Q.closest(t,[i.start,i.end,n.start,n.end])},onDrag:t=>{a&&(a.x=t.x,a.y=t.y)},onEnd:()=>{a=null}}),s()},getLineCircleIntersections:t=>{let e=t.getContext("2d"),i={start:{x:100,y:100},end:{x:300,y:300}},n={x:200,y:200,radius:50},a=null;function s(){tl(e),tc(e,i,"blue"),td(e,n,"red");let t=t3(i,n);t.forEach(t=>th(e,t,"green")),tx(e,[...t?.map(t=>["Intersection",t])??[],"Drag endpoints or circle to adjust"])}tf({canvas:t,draw:s},{onStart:t=>{let e=[i.start,i.end,n];a=Q.closest(t,e)},onDrag:t=>{a&&(a.x=t.x,a.y=t.y)},onEnd:()=>{a=null}}),s()},getLineRectIntersections:t=>{let e=t.getContext("2d"),i={start:{x:100,y:100},end:{x:300,y:300}},n={x:150,y:150,width:100,height:100},a=null;function s(){tl(e),tc(e,i,"blue"),ty(e,n,"red");let t=t4(i,n);t.forEach(t=>th(e,t,"green")),tx(e,[...t?.map(t=>["Intersection",t])??[],"Drag endpoints or rectangle to adjust"])}tf({canvas:t,draw:s},{onStart:t=>{let e=[i.start,i.end,n];a=Q.closest(t,e)},onDrag:t=>{a&&(a.x=t.x,a.y=t.y)},onEnd:()=>{a=null}}),s()},getCircleOverlap:t=>{let e=t.getContext("2d"),i={x:200,y:200,radius:100},n={x:300,y:200,radius:50},a=null;function s(){tl(e),td(e,i,"blue"),td(e,n,"red");let t=t9(i,n);if(t>0){let a=t3({start:i,end:n},{x:i.x,y:i.y,radius:i.radius-t/2});if(a.length>0){let i=a[0];td(e,{x:i.x,y:i.y,radius:t/2},"green",!0)}}tx(e,[["Overlap Depth",t],"Drag circles to adjust"])}tf({canvas:t,draw:s},{onStart:t=>{let e=[i,n];a=Q.closest(t,e)},onDrag:t=>{a&&(a.x=t.x,a.y=t.y)},onEnd:()=>{a=null}}),s()},getRectanglesIntersection:t=>{let e=t.getContext("2d"),i={x:100,y:100,width:150,height:100},n={x:200,y:150,width:250,height:150},a=null;function s(){tl(e),ty(e,i,"blue"),ty(e,n,"red");let t=t8(i,n);t&&ty(e,t,"green",!0),tx(e,[["Intersection",t||"None"],"Drag rectangles to adjust"])}tf({canvas:t,draw:s},{onStart:t=>{let e=[i,n];a=Q.closest(t,e)},onDrag:t=>{a&&(a.x=t.x,a.y=t.y)},onEnd:()=>{a=null}}),s()}},vector:{zero:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a=tH();tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue")}),tx(e,[["Vector",a],"Zero vector has no direction or length"])},add:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:0},s={x:0,y:100};function o(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue"),tu(t,a,tV(a,s),"red"),tu(t,n,tV(a,s),"green")}),tx(e,[["Vector 1",a],["Vector 2",s],["Sum",tV(a,s)],"Drag blue/red arrows to adjust vectors"])}tf({canvas:t,draw:o,center:i},{onDrag:t=>{let e=tV(n,a),i=tV(e,s);ti(t,[e,i])===e?a=tW(t,n):s=tW(t,e)}}),o()},subtract:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:0},s={x:0,y:100};function o(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue"),tu(t,n,s,"red"),tu(t,n,tW(a,s),"green")}),tx(e,[["Vector 1",a],["Vector 2",s],["Difference",tW(a,s)],"Drag blue/red arrows to adjust vectors"])}tf({canvas:t,draw:o,center:i},{onDrag:t=>{let e=tV(n,a);ti(t,[e,tV(n,s)])===e?a=tW(t,n):s=tW(t,n)}}),o()},scale:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:0},s=.75;function o(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue"),tu(t,n,tO(a,s),"green")}),tx(e,[["Vector",a],["Scale",s],["Result",tO(a,s)],"Drag blue arrow to adjust vector","Use +/- to adjust scale"])}tf({canvas:t,draw:o,center:i},{onDrag:t=>a=t}),tw({canvas:t,draw:o},{"+":()=>s*=1.1,"-":()=>s/=1.1}),o()},length:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:0};function s(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue")}),tx(e,[["Vector",a],["Length",tF(a)],"Drag arrow to adjust vector"])}tf({canvas:t,draw:s},{onDrag:t=>a=tW(t,i)}),s()},normal:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:i.x-100,y:i.y},a={x:i.x+100,y:i.y};function s(){tl(e),th(e,n,"blue"),th(e,a,"red"),tc(e,{start:n,end:a},"gray");let t=tq(n,a),i=tX(n,a,.5),s=tV(i,tO(t,50));tu(e,i,s,"green"),tx(e,[["Point 1",n],["Point 2",a],["Normal",t],"Drag blue/red points to adjust"])}tf({canvas:t,draw:s},{onDrag:t=>{ti(t,[n,a])===n?n=t:a=t}}),s()},normalize:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:0};function s(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue"),tu(t,n,tz(a),"green")}),tx(e,[["Vector",a],["Length",tF(a)],["Normalized",tz(a)],"Drag arrow to adjust vector"])}tf({canvas:t,draw:s,center:i},{onDrag:t=>a=t}),s()},clamp:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:0},s=50,o=100;function r(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue"),tu(t,n,tG(a,s,o),"green"),td(t,{x:0,y:0,radius:o},"gray"),td(t,{x:0,y:0,radius:s},"lightgray")}),tx(e,[["Vector",a],["Length",tF(a)],["Min Length",s],["Max Length",o],"Drag arrow to adjust vector","Use +/- to adjust max length","Use [/] to adjust min length"])}tf({canvas:t,draw:r,center:i},{onDrag:t=>a=t}),tw({canvas:t,draw:r},{"+":()=>o+=10,"-":()=>o=Math.max(s+10,o-10),"[":()=>s=Math.max(0,s-10),"]":()=>s=Math.min(o-10,s+10)}),r()},interpolate:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:-100,y:0},s={x:100,y:0},o=.5;function r(){tl(e),tb(e,i,t=>{t_(t);let e=tX(a,s,o);tu(t,n,a,"blue"),tu(t,n,s,"red"),tu(t,n,e,"green")}),tx(e,[["Vector 1",a],["Vector 2",s],["t",o],["Result",tX(a,s,o)],"Drag blue/red arrows to adjust vectors","Use +/- to adjust t"])}tf({canvas:t,draw:r,center:i},{onDrag:t=>{let e=ti(t,[a,s]);e.x=t.x,e.y=t.y}}),tw({canvas:t,draw:r},{"+":()=>o=Math.min(1,o+.1),"-":()=>o=Math.max(0,o-.1)}),r()},interpolateInverse:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:-100,y:0},s={x:100,y:0},o={x:0,y:0};function r(){tl(e),tb(e,i,t=>{t_(t);let e=tY(a,s,o),i=tX(a,s,e);tu(t,n,a,"blue"),tu(t,n,s,"red"),th(t,o,"green"),th(t,i,"black"),tc(t,{start:o,end:i},"gray")}),tx(e,[["Start",a],["End",s],["Point",o],["t",tY(a,s,o)],"Drag blue/red arrows for vectors","Move mouse to test positions"])}tm({canvas:t,draw:r,center:i},t=>{o=t}),tf({canvas:t,draw:r,center:i},{onDrag:t=>{let e=ti(t,[a,s]);e.x=t.x,e.y=t.y}}),r()},reflect:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:100},s=tK(0,1),o=1;function r(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,tO(tz(s),100),"blue"),th(t,a,"red"),tu(t,a,n,"red"),tu(t,n,tO(tZ(a,tz(s)),o),"green")}),tx(e,[["Normal",s],["Velocity",a],["Restitution",o],["Reflected",tO(tZ(a,tz(s)),o)],"Drag red arrow to adjust incoming velocity","Drag blue arrow to adjust surface normal","Use +/- to adjust restitution"])}tf({canvas:t,draw:r,center:i},{onDrag:t=>{ti(t,[a,s])===a?a=t:s=tW(t,n)}}),tw({canvas:t,draw:r},{"+":()=>o=Math.min(2,o+.1),"-":()=>o=Math.max(0,o-.1)}),r()},fromAngleRadians:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a=0,s=100;function o(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,tK(a,s),"blue")}),tx(e,[["Angle (rad)",a],["Length",s],["Vector",tK(a,s)],"Use +/- to adjust angle","Use [/] to adjust length"])}tw({canvas:t,draw:o},{"+":()=>a+=Math.PI/12,"-":()=>a-=Math.PI/12,"[":()=>s=Math.max(10,s-10),"]":()=>s+=10}),o()},fromAngleDegrees:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a=0,s=100;function o(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,tQ(a,s),"blue")}),tx(e,[["Angle (deg)",a],["Length",s],["Vector",tQ(a,s)],"Use +/- to adjust angle","Use [/] to adjust length"])}tw({canvas:t,draw:o},{"+":()=>a+=15,"-":()=>a-=15,"[":()=>s=Math.max(10,s-10),"]":()=>s+=10}),o()},rotateByRadians:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:0},s=Math.PI/4;function o(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue"),tu(t,n,tJ(a,s),"green")}),tx(e,[["Vector",a],["Angle (rad)",s],["Rotated",tJ(a,s)],"Drag blue arrow to adjust vector","Use +/- to adjust angle"])}tf({canvas:t,draw:o,center:i},{onDrag:t=>a=t}),tw({canvas:t,draw:o},{"+":()=>s+=Math.PI/12,"-":()=>s-=Math.PI/12}),o()},rotateByDegrees:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:0},s=15;function o(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue"),tu(t,n,t0(a,s),"green")}),tx(e,[["Vector",a],["Angle (deg)",s],["Rotated",t0(a,s)],"Drag blue arrow to adjust vector","Use +/- to adjust angle"])}tf({canvas:t,draw:o,center:i},{onDrag:t=>a=t}),tw({canvas:t,draw:o},{"+":()=>s+=15,"-":()=>s-=15}),o()},dot:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:0},s={x:0,y:100};function o(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue"),tu(t,n,s,"red");let e=t1(a,s)/(tF(a)*tF(s));tu(t,n,tO(s,e),"green")}),tx(e,[["Vector 1",a],["Vector 2",s],["Dot Product",t1(a,s)],["Projection of v1 onto v2",tO(s,t1(a,s)/tF(s)**2)],"Drag blue/red arrows to adjust vectors"])}tf({canvas:t,draw:o,center:i},{onDrag:t=>{let e=ti(t,[a,s]);e.x=t.x,e.y=t.y}}),o()},resize:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:100,y:50},s=150;function o(){tl(e),tb(e,i,t=>{t_(t),tu(t,n,a,"blue"),tu(t,n,t2(a,s),"green")}),tx(e,[["Vector",a],["Original Length",tF(a)],["New Length",s],["Resized Vector",t2(a,s)],"Drag arrow to adjust vector","Use +/- to adjust new length"])}tf({canvas:t,draw:o,center:i},{onDrag:t=>a=t}),tw({canvas:t,draw:o},{"+":()=>s+=10,"-":()=>s=Math.max(10,s-10)}),o()}},body:{Balls:t=>{let e=t.getContext("2d");class i extends el{constructor(t,e,i){super({x:t,y:e,mass:Math.PI*i*i,gravity:el.DOWNWARD_GRAVITY}),this.grabbed=!1,this.grabOffset={x:0,y:0},this.radius=i}}let n=[],a=null,s={x:0,y:0},o={x:0,y:0},r={x:0,y:0},l=0,h=["separate","repel","none"],d=0,c=()=>{let e=10+20*Math.random(),a=new i(Math.random()*t.width,Math.random()*t.height*.5,e);a.velocity={x:200*Math.random()-100,y:200*Math.random()-100},a.collisionOverlapResolution=h[d],n.push(a)},y=()=>{n.length=0,Array.from({length:10}).forEach(c)};y();let u=()=>{tl(e),n.forEach(t=>{td(e,t,t.grabbed?"red":"blue",!0)}),tx(e,[["Number of Balls",n.length,{precision:0}],["Overlap Mode",h[d]],"Drag balls to move them","Press +/- to add/remove a ball","Press R to reset","Press O to toggle overlap mode"])};return tf({canvas:t,draw:u},{onStart:t=>{s.x=t.x,s.y=t.y,o.x=t.x,o.y=t.y,r.x=t.x,r.y=t.y,l=performance.now(),n.forEach(t=>{J(t.position,s)<=t.radius&&(t.grabbed=!0,a=t,t.grabOffset=tW(s,t.position))})},onDrag:t=>{r.x=s.x,r.y=s.y,s.x=t.x,s.y=t.y,l=performance.now(),a&&(a.position=tW(s,a.grabOffset))},onEnd:()=>{if(a){let t=(performance.now()-l)/1e3;if(t>0){let e=tO(tW(s,r),1/t);a.velocity=e}a.grabbed=!1,a=null}}}),tw({canvas:t,draw:u},{"+":c,"-":()=>{n.length>0&&n.pop()},r:y,o:()=>{d=(d+1)%h.length,n.forEach(t=>{t.collisionOverlapResolution=h[d]})}}),t$(e=>{n.forEach(i=>{i.grabbed?(i.velocity.x=0,i.velocity.y=0,i.position.x=s.x-i.grabOffset.x,i.position.y=s.y-i.grabOffset.y,i.mass=Number.MAX_SAFE_INTEGER):(i.mass=Math.PI*i.radius*i.radius,i.update(e),i.collideWithSurface({x:0,y:0},{x:1,y:0}),i.collideWithSurface({x:t.width,y:0},{x:-1,y:0}),i.collideWithSurface({x:0,y:0},{x:0,y:1}),i.collideWithSurface({x:0,y:t.height},{x:0,y:-1}))}),n.forEach((t,e)=>{n.slice(e+1).forEach(e=>{t.collideWithBody(e)})})},u)},Billiards:t=>{let e=t.getContext("2d");class i extends el{constructor(t,e,i){super({x:t,y:e,mass:1}),this.grabbed=!1,this.grabOffset={x:0,y:0},this.radius=15,this.color=i,this.elasticity=.95,this.friction=.01}}let n=[],a=[{x:20,y:20},{x:t.width/2,y:20},{x:t.width-20,y:20},{x:20,y:t.height-20},{x:t.width/2,y:t.height-20},{x:t.width-20,y:t.height-20}],s=["white","gold","royalblue","crimson","purple","darkorange","forestgreen","saddlebrown","black","khaki","steelblue","indianred","darkmagenta","coral","seagreen","sienna"],o=null,r={x:0,y:0},l={x:0,y:0},h=()=>{n.length=0,n.push(new i(200,t.height/2,s[0]));let e=0,a=1;for(let o=-2;o<=2;o++){for(let o=0;o<=e;o++)a<s.length&&n.push(new i(550+15*e,t.height/2+30*o-15*e,s[a++]));e++}};h();let d=()=>{if(tl(e),ty(e,{x:0,y:0,width:t.width,height:t.height},"brown",!0),ty(e,{x:10,y:10,width:t.width-20,height:t.height-20},"darkgreen",!0),a.forEach(t=>{td(e,{x:t.x,y:t.y,radius:25},"black",!0)}),n.forEach(t=>{td(e,t,t.color,!0)}),o){let t=tO(tW(l,r),2);tc(e,{start:o.position,end:tV(o.position,t)},"rgba(255, 255, 255, .25)",2),td(e,{x:o.position.x+t.x,y:o.position.y+t.y,radius:2},"white",!0)}tx(e,[["Number of Balls",n.length,{precision:0}],"Drag the cue ball to aim and shoot","Press R to reset"],{color:"white"})};return tf({canvas:t,draw:d},{onStart:t=>{r.x=t.x,r.y=t.y,l.x=t.x,l.y=t.y;let e=n[0];J(e.position,r)<=e.radius&&(o=e)},onDrag:t=>{r.x=t.x,r.y=t.y},onEnd:()=>{if(o){let t=tW(l,r);o.velocity=tV(o.velocity,tO(t,10)),o=null}}}),tw({canvas:t,draw:d},{r:h}),t$(e=>{n.forEach(i=>{i.update(e),i.collideWithSurface({x:10,y:0},{x:1,y:0}),i.collideWithSurface({x:t.width-10,y:0},{x:-1,y:0}),i.collideWithSurface({x:0,y:10},{x:0,y:1}),i.collideWithSurface({x:0,y:t.height-10},{x:0,y:-1})}),n.forEach((t,e)=>{n.slice(e+1).forEach(e=>{t.collideWithBody(e)})});for(let e=n.length-1;e>=0;e--){let i=n[e];a.some(t=>25>J(i.position,t))&&("white"===i.color?(i.position={x:200,y:t.height/2},i.velocity=tK(Math.random()*Math.PI*2,50)):n.splice(e,1))}},d)},Spaceship:t=>{let e=t.getContext("2d"),i=new class extends el{constructor(){super({x:t.width/2,y:t.height/2,mass:1}),this.thrusting=!1,this.radius=20}thrust(){let t=tK(this.angle,500);this.applyForce(t)}update(e){this.velocity=tO(this.velocity,.999),super.update(e),this.position.x=(this.position.x+t.width)%t.width,this.position.y=(this.position.y+t.height)%t.height}},n=Array.from({length:100},()=>({x:Math.random()*t.width,y:Math.random()*t.height,color:`rgba(${200+55*Math.random()}, ${200+55*Math.random()}, ${200+55*Math.random()}, 1)`,size:2*Math.random()+1})),a=[];return tP.listen(),t$(t=>{if(tP.isDown("ArrowLeft")&&(i.angle-=4*t),tP.isDown("ArrowRight")&&(i.angle+=4*t),tP.isDown("ArrowUp")){i.thrust(),i.thrusting=!0;for(let t=0;t<3;t++){let t=tK(i.angle,-15);a.push({x:i.position.x+t.x+(Math.random()-.5)*10,y:i.position.y+t.y+(Math.random()-.5)*10,radius:3*Math.random()+1,life:1,velocity:tV(tK(i.angle,-100),tK(Math.random()*Math.PI*2,50*Math.random()))})}}else i.thrusting=!1;i.update(t),a.forEach(e=>{e.life-=t,e.x+=e.velocity.x*t,e.y+=e.velocity.y*t,e.velocity=tO(e.velocity,.95),e.radius*=.95}),a=a.filter(t=>t.life>0)},()=>{if(ty(e,{x:0,y:0,width:t.width,height:t.height},"black",!0),n.forEach(t=>{th(e,{x:t.x,y:t.y},t.color,t.size)}),a.forEach(t=>{td(e,{x:t.x,y:t.y,radius:t.radius},"orange",!0)}),e.save(),e.translate(i.position.x,i.position.y),e.rotate(i.angle),e.beginPath(),e.moveTo(20,0),e.lineTo(-10,10),e.lineTo(-10,-10),e.closePath(),e.strokeStyle="white",e.stroke(),i.thrusting){e.beginPath(),e.moveTo(-10,0);for(let t=0;t<=5;t++){let i=t/5*Math.PI/3-Math.PI/6,n=10+10*Math.random();e.lineTo(-10-n*Math.cos(i),n*Math.sin(i))}e.closePath(),e.fillStyle="orange",e.fill()}e.restore()})},Artillery:t=>{let e=t.getContext("2d");class i extends el{constructor(t,e){super({position:t,velocity:e,mass:5,gravity:{x:0,y:500}}),this.radius=5}}let n=new class{constructor(t,e){this.angle=-Math.PI/4,this.power=0,this.charging=!1,this.chargeStartTime=0,this.position={x:t,y:e}}startCharging(){this.charging=!0,this.chargeStartTime=performance.now()}stopCharging(){this.charging=!1,this.power=this.calculatePower()}calculatePower(){return Math.min(1e3,100+(performance.now()-this.chargeStartTime)/1e3*500)}}(50,t.height-50),a=new class extends el{constructor(e){super({x:e,y:t.height-50,mass:10}),this.hit=!1,this.radius=20}applyGravity(){this.gravity={x:0,y:500}}reset(){this.hit=!1,this.gravity={x:0,y:0},this.velocity={x:0,y:0},this.position.x=Math.random()*(t.width-200)+100,this.position.y=Math.random()*(t.height-200)}}(t.width-100),s=null,o=0,r=t.height-30;function l(){tl(e),ty(e,{x:0,y:r,width:t.width,height:t.height-r},"#764",!0),td(e,{x:n.position.x,y:n.position.y,radius:15},"#333",!0);let i=tV(n.position,tK(n.angle,30));if(tc(e,{start:n.position,end:i},"#333",10),n.charging){let t=n.calculatePower(),i=tV(n.position,tK(n.angle,t/10));tu(e,n.position,i,"red")}td(e,a,a.hit?"red":"blue",!0),s&&td(e,s,"#333",!0),tx(e,[["Score",o,{precision:0}],["Angle",tC.radiansToDegrees(n.angle)],["Power",n.charging?n.calculatePower():n.power],"Click and hold to charge cannon"])}return tf({canvas:t,draw:l},{onStart:()=>{n.startCharging()},onEnd:()=>{n.stopCharging();let t=tK(n.angle,n.power);s=new i({...n.position},t)}}),tm({canvas:t},t=>{n.angle=tC.radiansBetweenPoints(n.position,t)}),t$(t=>{s&&(s.update(t),!a.hit&&s.collideWithBody(a)?(a.hit=!0,a.applyGravity(),o++,s=null):s.position.y>r&&(s=null)),a.update(t),a.position.y>r&&a.reset()},l)},Tank:t=>{let e=t.getContext("2d");class i extends el{constructor(t,e){super({position:t,velocity:tK(e,2500)}),this.timeAlive=0,this.radius=3,this.mass=25}}class n extends el{constructor(t,e,i){super({x:t,y:e,mass:10*i}),this.radius=i,this.elasticity=.8,this.friction=.2}}let a=new class extends el{constructor(){super({x:t.width/2,y:t.height/2,mass:5}),this.angle=0,this.turretAngle=0,this.throttle=0,this.turretRotationSpeed=5,this.radius=20,this.mass=100}update(t){let e=tC.radiansBetweenPoints(this.position,r);this.turretAngle=tC.rotateAngleTowardsRadians(this.turretAngle,e,this.turretRotationSpeed*t),this.velocity=tK(a.angle,a.throttle),this.throttle*=.99,super.update(t)}},s=[],o=Array.from({length:15},()=>new n(Math.random()*t.width,Math.random()*t.height,10+20*Math.random())),r={x:0,y:0};function l(){tl(e),tb(e,a.position,t=>{t.rotate(a.angle),ty(t,{x:-25,y:-15,width:50,height:30},"#3a3",!0)}),tb(e,a.position,t=>{t.rotate(a.turretAngle),tc(t,{start:{x:0,y:0},end:tK(0,30)},"#373",10)}),s.forEach(t=>{td(e,t,"orange",!0)}),o.forEach(t=>{td(e,t,"gray",!0)}),tx(e,[["Speed",a.speed],"Arrow Keys: Rotate and Throttle","Click to Fire"])}return tm({canvas:t,draw:l},t=>{r.x=t.x,r.y=t.y}),tv({canvas:t,draw:l},()=>{let t=tV(a.position,tK(a.turretAngle,a.radius));s.push(new i(t,a.turretAngle))}),tP.listen(),t$(e=>{tP.isDown("ArrowLeft")&&(a.angle-=2*e),tP.isDown("ArrowRight")&&(a.angle+=2*e),tP.isDown("ArrowUp")&&(a.throttle=Math.min(200,a.throttle+400*e)),tP.isDown("ArrowDown")&&(a.throttle=Math.max(-100,a.throttle-400*e)),a.update(e),a.position.x=Math.max(a.radius,Math.min(t.width-a.radius,a.position.x)),a.position.y=Math.max(a.radius,Math.min(t.height-a.radius,a.position.y));for(let i=s.length-1;i>=0;i--){let n=s[i];n.update(e),n.timeAlive+=e,(n.timeAlive>2||n.position.x<0||n.position.x>t.width||n.position.y<0||n.position.y>t.height)&&s.splice(i,1)}o.forEach(t=>t.update(e)),o.forEach(t=>a.collideWithBody(t)),s.forEach(t=>{o.forEach(e=>t.collideWithBody(e))}),o.forEach((t,e)=>{o.slice(e+1).forEach(e=>t.collideWithBody(e))})},l)},Car:t=>{let e=t.getContext("2d");class i extends el{constructor(t,e,i){super({x:t,y:e,mass:i**2}),this.radius=i,this.elasticity=.8,this.friction=.002}}let n=new class extends el{constructor(){super({x:t.width/2,y:t.height/2,mass:2}),this.steering=0,this.throttle=0,this.radius=20,this.mass=20}update(t){this.angle+=this.steering*this.throttle*t*.003,this.velocity=tK(this.angle,this.throttle),this.throttle*=.99,super.update(t)}},a=Array.from({length:50},()=>new i(Math.random()*t.width,Math.random()*t.height,5+Math.random()**5*25));return tP.listen(),t$(e=>{tP.isDown("ArrowLeft")?n.steering=-1:tP.isDown("ArrowRight")?n.steering=1:n.steering=0,tP.isDown("ArrowUp")&&(n.throttle=Math.min(300,n.throttle+400*e)),tP.isDown("ArrowDown")&&(n.throttle=Math.max(-100,n.throttle-400*e)),n.update(e),n.position.x=(n.position.x+t.width)%t.width,n.position.y=(n.position.y+t.height)%t.height,a.forEach(i=>{i.update(e),i.position.x=(i.position.x+t.width)%t.width,i.position.y=(i.position.y+t.height)%t.height}),a.forEach(t=>n.collideWithBody(t)),a.forEach((t,e)=>{a.slice(e+1).forEach(e=>t.collideWithBody(e))})},()=>{tl(e),tb(e,n.position,t=>{t.rotate(n.angle),ty(t,{x:-20,y:-10,width:40,height:20},"#d33",!0),ty(t,{x:-15,y:-12,width:8,height:4},"#333",!0),ty(t,{x:-15,y:8,width:8,height:4},"#333",!0),ty(t,{x:7,y:-12,width:8,height:4},"#333",!0),ty(t,{x:7,y:8,width:8,height:4},"#333",!0)}),a.forEach(t=>{td(e,t,"gray",!0)}),tx(e,[["Speed",n.speed],["Steering",n.steering],"Arrow Keys: Steer and Accelerate"])})},Chase:t=>{let e=t.getContext("2d");class i extends el{static{this.MIN_THRUST_SPEED=200}static{this.MAX_THRUST_SPEED=1500}get color(){let t=(this.thrustSpeed-i.MIN_THRUST_SPEED)/(i.MAX_THRUST_SPEED-i.MIN_THRUST_SPEED),e=Math.round(255*t),n=Math.round(255*(1-t));return`rgb(${e}, 0, ${n})`}constructor(t,e){super({x:t,y:e,mass:1}),this.thrustSpeed=i.MIN_THRUST_SPEED+(i.MAX_THRUST_SPEED-i.MIN_THRUST_SPEED)*Math.random()**3,this.turnSpeed=tD(5),this.trail=[],this.trailLength=20,this.radius=5,this.maxSpeed=1500,this.friction=.01}chase(t){this.pointTowards(t,this.turnSpeed),this.thrust(this.thrustSpeed)}update(t){super.update(t),this.trail.push({...this.position}),this.trail.length>this.trailLength&&this.trail.shift()}}let n=Array.from({length:50},()=>new i(Math.random()*t.width,Math.random()*t.height)),a=e=>{for(let a=0;a<e;a++)n.push(new i(Math.random()*t.width,Math.random()*t.height))},s=t=>{n.splice(-t,t)},o={x:t.width/2,y:t.height/2};function r(){tl(e),n.forEach(t=>{th(e,t.position,t.color,2),e.beginPath(),t.trail.forEach(t=>e.lineTo(t.x,t.y)),e.strokeStyle=t.color,e.stroke()}),td(e,{x:o.x,y:o.y,radius:5},"red",!0),tx(e,[["Number of Birds",n.length,{precision:0}],"Move the mouse to attract the birds","Press +/- to add/remove 10 birds"])}return tm({canvas:t,draw:r},t=>{o=t}),tw({canvas:t,draw:r},{"+":()=>a(10),"-":()=>s(10)}),t$(function(t){n.forEach((e,i)=>{e.chase(o),n.slice(i+1).forEach(t=>{t6.repel(e,t,20)}),e.update(t)})},r)}},physics:{applyForce:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a={x:.05,y:-.03};function s(){tl(e),td(e,{...i,radius:10},"blue"),tx(e,[["Position",i],["Velocity",n],["Force",a],"Click to reset position","Use +/- to change force magnitude"])}tM(()=>{t7(n,a,1),i.x+=n.x,i.y+=n.y},s),tv({canvas:t,draw:s},t=>{i={...t},n={x:0,y:0}}),tw({canvas:t,draw:s},{"+":()=>{a.x*=1.1,a.y*=1.1},"-":()=>{a.x*=.9,a.y*=.9}})},applyDamping:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:5,y:-3},a=.05;function s(){tl(e),td(e,{...i,radius:10},"blue"),tx(e,[["Position",i],["Velocity",n],["Damping",a],"Click to reset position","Use +/- to change damping amount"])}tM(()=>{et(n,a),i.x+=n.x,i.y+=n.y},s),tv({canvas:t,draw:s},t=>{i={...t},n={x:5,y:-3}}),tw({canvas:t,draw:s},{"+":()=>{a=Math.min(a+.01,1)},"-":()=>{a=Math.max(a-.01,0)}})},applyTorque:t=>{let e=t.getContext("2d"),i=0,n=0,a=.1;function s(){tl(e);let s={x:t.width/2,y:t.height/2},o=tK(i,50);tb(e,s,t=>{tc(t,{start:{x:0,y:0},end:o},"blue",2)}),tx(e,[["Angle",i],["Angular Velocity",n],["Torque",a],"Click to reset angle","Use +/- to change torque amount"])}tM(()=>{n=ee(n,a,.01),i+=n},s),tv({canvas:t,draw:s},()=>{i=0,n=0}),tw({canvas:t,draw:s},{"+":()=>{a=Math.min(a+.01,1)},"-":()=>{a=Math.max(a-.01,0)}})},applyAngleForce:t=>{let e=t.getContext("2d"),i={x:t.width/2,y:t.height/2},n={x:0,y:0},a=.1;function s(){tl(e),td(e,{...i,radius:10},"blue"),tx(e,[["Position",i],["Velocity",n],["Force Magnitude",a],"Press to apply force away from mouse","Use +/- to change force magnitude"])}let o=!1,r={x:0,y:0};tM(()=>{if(o){let t=tT(r,i);ei(n,t,a,1)}i.x+=n.x,i.y+=n.y,(i.x<0||i.x>t.width||i.y<0||i.y>t.height)&&(i={x:t.width/2,y:t.height/2},n={x:0,y:0})},s),tf({canvas:t,draw:s},{onStart:t=>{o=!0,r=t},onDrag:t=>r=t,onEnd:t=>{r=t,o=!1}}),tw({canvas:t,draw:s},{"+":()=>a+=.01,"-":()=>a-=.01})},collide:t=>{let e=t.getContext("2d"),i={position:{x:200,y:200},velocity:{x:0,y:0},mass:1,radius:20},n={position:{x:400,y:200},velocity:{x:0,y:0},mass:1,radius:20},a=!1,s=null,o={x:200,y:300},r={x:250,y:320},l={x:400,y:300},h={x:330,y:310};function d(){tl(e),i.radius=20*i.mass,n.radius=20*n.mass,td(e,{x:o.x,y:o.y,radius:i.radius},"gray",!1),tu(e,o,r,"gray"),td(e,{x:l.x,y:l.y,radius:n.radius},"gray",!1),tu(e,l,h,"gray"),a&&(td(e,{...i.position,radius:i.radius},"blue",!0),td(e,{...n.position,radius:n.radius},"red",!0)),tx(e,["Drag initial positions and velocities",["Object 1",Object.entries(i)],["Object 2",Object.entries(n)],["Restitution",y],"Press +/- to adjust mass of first object","Press [/] to adjust mass of second object","Press 1/2 to adjust restitution","Press R to replay simulation"])}function c(){i={...i,position:{...o},velocity:tO(tW(r,o),.1)},n={...n,position:{...l},velocity:tO(tW(h,l),.1)},a=!0}c(),tf({canvas:t,draw:d},{onStart:t=>{s=ti(t,[o,r,l,h])},onDrag:t=>{s&&(s.x=t.x,s.y=t.y)},onEnd:()=>{s=null,c()}}),tw({canvas:t,draw:d},{r:c,"+":()=>i.mass+=.1,"-":()=>i.mass-=.1,"[":()=>n.mass-=.1,"]":()=>n.mass+=.1,1:()=>y=Math.max(y-.1,0),2:()=>y=Math.min(y+.1,1)});let y=.9;tM(()=>{a&&(i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,n.position.x+=n.velocity.x,n.position.y+=n.velocity.y,J(i.position,n.position)<i.radius+n.radius&&en(i,n,y))},d)},separate:t=>{let e=t.getContext("2d"),i=Array.from({length:5},()=>n());function n(e={x:t.width/2+50*Math.random()-25,y:t.height/2+50*Math.random()-25}){let i=20*Math.random()+10;return{position:e,velocity:{x:0,y:0},mass:i/10,radius:i}}function a(){tl(e),i.forEach(t=>{td(e,{...t.position,radius:t.radius},"blue")}),tx(e,["Click to add a new random size object"])}tM(()=>{for(let t=0;t<i.length;t++)for(let e=t+1;e<i.length;e++)ea(i[t],i[e])},a),tv({canvas:t,draw:a},t=>{let e=()=>2*Math.random()-1,a={x:t.x+e(),y:t.y+e()};i.push(n(a))})},repel:t=>{let e=t.getContext("2d"),i=Array.from({length:5},()=>s()),n=.001,a=.99;function s(e={x:t.width/2+50*Math.random()-25,y:t.height/2+50*Math.random()-25}){let i=20*Math.random()+10;return{position:e,velocity:{x:0,y:0},mass:i/10,radius:i}}function o(){tl(e),i.forEach(t=>{td(e,{...t.position,radius:t.radius},"red")}),tx(e,["Click to add a new random size object",["Repel Strength",n,{precision:4}],["Friction",a],"Use +/- to change repel strength","Use [/] to change friction"])}tM(()=>{for(let t=0;t<i.length;t++)for(let e=t+1;e<i.length;e++)es(i[t],i[e],n);i.forEach(t=>{t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.velocity.x*=a,t.velocity.y*=a})},o),tw({canvas:t,draw:o},{"+":()=>n+=.001,"-":()=>n-=.001,"[":()=>a-=.01,"]":()=>a+=.01}),tv({canvas:t,draw:o},t=>{let e=()=>2*Math.random()-1,n={x:t.x+e(),y:t.y+e()};i.push(s(n))})},fluid:t=>{let e=t.getContext("2d"),i=Array.from({length:1500},()=>({position:{x:t.width/2+150*Math.random()-25,y:t.height/2+150*Math.random()-25},velocity:{x:0,y:0},density:0,pressure:0,mass:1})),n={smoothingRadius:15,stiffness:5,restDensity:1,viscosity:.5},a=null;function s(){tl(e),i.forEach(t=>td(e,{...t.position,radius:5},"blue")),tx(e,["Fluid simulation",["Particles",i.length,{precision:0}],["Fluid",Object.entries(n)],"Click and drag to apply forces"])}tM(()=>{let e=eo(i,n);i.forEach((i,n)=>{i.velocity.x+=e[n].x,i.velocity.y+=e[n].y,i.velocity.x+=0,i.velocity.y+=.1,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,(i.position.x<0||i.position.x>t.width)&&(i.velocity.x*=-.5,i.position.x=Math.max(0,Math.min(t.width,i.position.x))),(i.position.y<0||i.position.y>t.height)&&(i.velocity.y*=-.5,i.position.y=Math.max(0,Math.min(t.height,i.position.y)))})},s),tf({canvas:t,draw:s},{onStart:t=>{a=t},onDrag:t=>{if(a){let e=tW(t,a);i.forEach(i=>{let n=J(i.position,t);if(n<50){let t=tO(e,2.5/(n+1));i.velocity.x+=t.x,i.velocity.y+=t.y}})}a=t},onEnd:()=>{a=null}})},boids:t=>{let e=t.getContext("2d"),i=Array.from({length:30},()=>({position:{x:Math.random()*t.width,y:Math.random()*t.height},velocity:{x:2*Math.random()-1,y:2*Math.random()-1}})),n={separationRadius:25,alignmentRadius:50,cohesionRadius:50,separationWeight:1.5,alignmentWeight:2,cohesionWeight:.1,maxSpeed:.12},a=null,s=Array.from({length:i.length},()=>Math.random()*Math.PI*2);function o(){tl(e),i.forEach(t=>{let i=Math.atan2(t.velocity.y,t.velocity.x);e.save(),e.translate(t.position.x,t.position.y),e.rotate(i),e.beginPath(),e.moveTo(10,0),e.lineTo(-10,-5),e.lineTo(-10,5),e.closePath(),e.fillStyle="blue",e.fill(),e.strokeStyle="black",e.stroke(),e.restore()}),tx(e,["Flocking simulation",...Object.entries(n).map(([t,e])=>[t,e])])}tm({canvas:t,draw:o},t=>{a=t}),tM(()=>{let e=er(i,n);i.forEach((i,o)=>{if(i.velocity.x+=e[o].x,i.velocity.y+=e[o].y,0===e[o].x&&0===e[o].y){s[o]+=(Math.random()-.5)*.1;let t=tK(s[o],n.maxSpeed);i.velocity=tV(i.velocity,t)}let r={x:0,y:0};if(i.position.x<50&&(r.x+=2/Math.max(i.position.x,1)),i.position.x>t.width-50&&(r.x-=2/Math.max(t.width-i.position.x,1)),i.position.y<50&&(r.y+=2/Math.max(i.position.y,1)),i.position.y>t.height-50&&(r.y-=2/Math.max(t.height-i.position.y,1)),i.velocity=tV(i.velocity,r),a){let t=J(i.position,a);if(t<100){let e=tO(tz(tW(i.position,a)),5/Math.max(t,1));i.velocity=tV(i.velocity,e)}}i.velocity=tO(i.velocity,.95),i.position=tV(i.position,i.velocity),i.position.x=Math.max(0,Math.min(t.width,i.position.x)),i.position.y=Math.max(0,Math.min(t.height,i.position.y))})},o)}}};function ed(){let[t="point",e]=location.hash.slice(1).split("/"),i=document.getElementById("demo");null!==tA&&(cancelAnimationFrame(tA),tA=null),tP.stop(),H($`
    ${$`
    <div class="demo-nav">
      <div class="section-nav">
        ${Object.keys(eh).map(e=>$`
          <a href="#${e}" class="${e===t?"active":""}">${e}</a>
        `)}
      </div>
      <div class="method-nav">
        ${t&&eh[t]&&Object.keys(eh[t]).map(i=>$`
            <a href="#${t}/${i}" 
               class="${i===e?"active":""}">${i}</a>
          `)}
      </div>
    </div>
  `}
    ${K([Date.now()],t=>t,()=>$`<canvas width="800" height="600"></canvas>`)}
  `,i);let n=i.querySelector("canvas");tl(n.getContext("2d")),e&&eh[t]?.[e]&&eh[t][e](n)}window.addEventListener("hashchange",ed),ed();
//# sourceMappingURL=demo.93048f35.js.map
